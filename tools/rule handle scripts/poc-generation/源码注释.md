#输入框：修改/添加字段(请求体为例)

#rule.js

添加bodys

	this.bodys = [new Body()];

#body.js

Body类

	export default class BodyObject {
	  constructor() {
	    this.index = ++nextBodyIndex;
	    this.key = "";
	  }
	}

#Body.js

Body的Button

        {this.props.showDeleteButton ? (
          <Icon
            className="dynamic-delete-button color-red"
            type="minus-circle-o"
            style={{"color": "#ff6868"}}
            onClick={e => this.props.deleteHandler(this.props.body.index)}
          />
        ) : null}
        {this.props.showAddButton ? (
          <Icon
            className="dynamic-delete-button color-grey"
            type="plus-circle-o"
            onClick={this.props.addHandler}
          />
        ) : null}
      </React.Fragment>


##Rule.js

输入规则

	#增加、修改、删除
	
	addBody(){
	    let bodys = update(this.props.rule.bodys, {$push: [new Body()]});
	    this.changeInputValueByName('bodys', bodys);
	  }
	
	updateBody(index, key, value) {
	    const i = findObjectByIndex(this.props.rule.bodys, index);
	    if (i >= 0) {
	      let bodys = update(this.props.rule.bodys, {[i]: {[key]: {$set: value}}});
	      this.changeInputValueByName('bodys', bodys);
	    }
	  }
		
	deleteBody(index) {
		    const i = findObjectByIndex(this.props.rule.bodys, index);
		    if (i >= 0) {
		      let bodys = update(this.props.rule.bodys, {$splice: [[i, 1]]});
		      this.changeInputValueByName('bodys', bodys);
		    }
		  }
	
		#表单
		<Form.Item label="请求体" className="rule-item" validateStatus={this.state.bodysHelp.status} help={this.state.bodysHelp.help}>
		          {/* <Input.TextArea autosize={{minRows: 2}} name="body" value={this.props.rule.body} onChange={this.changeInputValue} /> */}
		          {this.props.rule.bodys.map((body, index) =>
		            <BodyComponent
		              key={body.index}
		              body={body}
		              showAddButton={index === this.props.rule.bodys.length - 1}
		              showDeleteButton={this.props.rule.bodys.length > 1}
		              addHandler={this.addBody}
		              updateHandler={this.updateBody}
		              deleteHandler={this.deleteBody}
		            />
		          )}

##App.js

输出规则：generatePOC() 

	let data = {
      name: this.state.name,
      rules: clone(this.state.rules),
    };
    var rule_content = "";
	const start = "alert http any any -> any any (msg:";

	for (let rule of data.rules) {
	#获取content
	rule_content = rule_content + "http.method; content:\""+rule.method+"\"; "
	
	}
	
	const end = ")"
	#拼接字段
	var result = start + rule_content + end;
	#返回
	this.setState({poc : result},() => console.log(this.state));