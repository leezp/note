/*
Copyright 2013, KISSY v1.41
MIT Licensed
build time: Dec 4 22:04
*/
KISSY.add("anim/timer/easing",[],function(){function j(a){return a}function g(a,b,n,e){var d=3*a-3*n+1,c=3*n-6*a,i=3*a,l=3*b-3*e+1,f=3*e-6*b,j=3*b;return function(a){a:{for(var b=a,n,e,k=0;8>k;k++){e=((d*b+c)*b+i)*b-a;if(m(e)<o){a=b;break a}n=(3*d*b+2*c)*b+i;if(m(n)<o)break;b-=e/n}n=1;k=0;for(b=a;n>k;){e=((d*b+c)*b+i)*b-a;if(m(e)<o)break;0<e?n=b:k=b;b=(n+k)/2}a=b}return((l*a+f)*a+j)*a}}var h=Math.PI,i=Math.pow,b=Math.sin,c=parseFloat,l=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,f={swing:function(a){return-Math.cos(a*
h)/2+0.5},easeNone:j,linear:j,easeIn:function(a){return a*a},ease:g(0.25,0.1,0.25,1),"ease-in":g(0.42,0,1,1),"ease-out":g(0,0,0.58,1),"ease-in-out":g(0.42,0,0.58,1),"ease-out-in":g(0,0.42,1,0.58),toFn:function(a){var b;return(b=a.match(l))?g(c(b[1]),c(b[2]),c(b[3]),c(b[4])):f[a]||j},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(i(2,10*(a-=1))*b(2*(a-0.075)*h/0.3))},elasticOut:function(a){return 0===a||1===a?a:i(2,-10*a)*b(2*(a-0.075)*h/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*i(2,10*(a-=1))*b(2*(a-0.1125)*h/0.45):0.5*i(2,-10*(a-=1))*b(2*(a-0.1125)*h/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
n=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(n*a-b):0.5*((a-=2)*a*(n*a+b)+2)},bounceIn:function(a){return 1-f.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*f.bounceIn(2*a):0.5*f.bounceOut(2*a-1)+0.5}},o=1.0E-6,m=Math.abs;return f});
KISSY.add("anim/timer/manager",[],function(j){var g=j.stamp,h,i;h=function(b){return setTimeout(b,15)};i=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var c=g(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[g(b)];j.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=h(function l(){b.runFrames()?
b.stopTimer():b.timer=h(l)}))},stopTimer:function(){var b=this.timer;b&&(i(b),this.timer=0)},runFrames:function(){var b,c,i=this.runnings;for(b in i)i[b].frame();for(b in i){c=0;break}return void 0===c}}});
KISSY.add("anim/timer/fx",["dom"],function(j,g){function h(b){j.mix(this,b);this.pos=0;this.unit=this.unit||""}var i=g("dom");h.prototype={isCustomFx:0,constructor:h,load:function(b){j.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){if(1!==this.pos){var c=this.anim,h=this.prop,f=c.node,g=this.from,m=this.propData,a=this.to;if(void 0===b)var k=j.now(),b=m.duration,k=k-c.startTime-m.delay,b=0>=k?0:k>=b?1:m.easing(k/b);this.pos=b;g===a||0===b||(this.val=b=this.interpolate(g,a,this.pos),
m.frame?m.frame.call(this,c,this):this.isCustomFx||(void 0===b?(this.pos=1,b=a,h+" update directly ! : "+b+" : "+g+" : "+a):b+=this.unit,this.val=b,"attr"===this.type?i.attr(f,h,b,1):i.css(f,h,b)))}},interpolate:function(b,c,i){if("number"===typeof b&&"number"===typeof c)return Math.round(1E5*(b+(c-b)*i))/1E5},cur:function(){var b=this.prop,c,h,f=this.anim.node;if(this.isCustomFx)return f[b]||0;if(!(c=this.type))c=this.type=(!f.style||null==f.style[b])&&null!=i.attr(f,b,void 0,1)?"attr":"css";b="attr"===
c?i.attr(f,b,void 0,1):i.css(f,b);return isNaN(h=parseFloat(b))?!b||"auto"===b?0:b:h}};h.Factories={};h.FxTypes={};h.getFx=function(b){var c=h,i,f;if(i=b.fxType)c=h.FxTypes[i];else if(!b.isCustomFx&&(f=h.Factories[b.prop]))c=f;return new c(b)};return h});
KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",["./fx","./short-hand"],function(j,g){function h(b){var b=b+"",e;if(e=b.match(m))return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])];if(e=b.match(a))return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])];if(e=b.match(k)){for(b=1;b<e.length;b++)2>e[b].length&&(e[b]+=e[b]);return[parseInt(e[1],l),parseInt(e[2],l),parseInt(e[3],l)]}if(o[b=b.toLowerCase()])return o[b];"only allow rgb or hex color string : "+b;return[255,255,255]}function i(){i.superclass.constructor.apply(this,
arguments)}var b=g("./fx"),c=g("./short-hand"),l=16,f=Math.floor,o={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},m=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,k=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;
c.background.push("backgroundColor");c.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];c.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");c.borderBottom.push("borderBottomColor");c.borderLeft.push("borderLeftColor");c.borderRight.push("borderRightColor");c.borderTop.push("borderTopColor");j.extend(i,b,{load:function(){i.superclass.load.apply(this,arguments);this.from&&(this.from=h(this.from));this.to&&(this.to=h(this.to))},
interpolate:function(a,b,d){var k=i.superclass.interpolate;if(3===a.length&&3===b.length)return"rgb("+[f(k(a[0],b[0],d)),f(k(a[1],b[1],d)),f(k(a[2],b[2],d))].join(", ")+")";if(4===a.length||4===b.length)return"rgba("+[f(k(a[0],b[0],d)),f(k(a[1],b[1],d)),f(k(a[2],b[2],d)),f(k(a[3]||1,b[3]||1,d))].join(", ")+")";"unknown value : "+a}});j.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){b.Factories[a]=i});return b.FxTypes.color=
i});
KISSY.add("anim/timer/transform",["dom","./fx"],function(j,g){function h(a){a=a.split(/,/);return a=j.map(a,function(a){return b(a)})}function i(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function b(a){return Math.round(1E5*parseFloat(a))/1E5}function c(a){for(var a=a.split(")"),k=j.trim,n=-1,e=a.length-1,d,c,f=i();++n<e;)switch(d=a[n].split("("),c=k(d[0]),d=d[1],c){case "translateX":case "translateY":case "scaleX":case "scaleY":f[c]=b(d);break;case "rotate":case "skewX":case "skewY":var g=b(d);
j.endsWith(d,"deg")||(g=180*g/Math.PI);f[c]=g;break;case "translate":case "translate3d":d=d.split(",");f.translateX=b(d[0]);f.translateY=b(d[1]||0);break;case "scale":d=d.split(",");f.scaleX=b(d[0]);f.scaleY=b(d[1]||d[0]);break;case "matrix":return a=d,a=h(a),e=n=k=void 0,c=a[0],f=a[1],d=a[2],g=a[3],c*g-f*d?(k=Math.sqrt(c*c+f*f),e=(c*d+f*g)/(c*g-d*f),n=(c*g-f*d)/k,c*g<f*d&&(e=-e,k=-k)):k=n=e=0,{translateX:b(a[4]),translateY:b(a[5]),rotate:b(180*Math.atan2(f,c)/Math.PI),skewX:b(180*Math.atan(e)/Math.PI),
skewY:0,scaleX:b(k),scaleY:b(n)}}return f}function l(){l.superclass.constructor.apply(this,arguments)}var f=g("dom"),o=g("./fx"),m=j.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";j.extend(l,o,{load:function(){l.superclass.load.apply(this,arguments);this.from=(this.from=f.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?c(this.from):i();this.to=this.to?c(this.to):i()},interpolate:function(a,b,c){var e=l.superclass.interpolate,
d={};d.translateX=e(a.translateX,b.translateX,c);d.translateY=e(a.translateY,b.translateY,c);d.rotate=e(a.rotate,b.rotate,c);d.skewX=e(a.skewX,b.skewX,c);d.skewY=e(a.skewY,b.skewY,c);d.scaleX=e(a.scaleX,b.scaleX,c);d.scaleY=e(a.scaleY,b.scaleY,c);return j.substitute(m+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",d)}});return o.Factories.transform=l});
KISSY.add("anim/timer","dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(","),function(j,g){function h(){var a;h.superclass.constructor.apply(this,arguments);j.each(a=this.to,function(b,c){var d=m(c);if(c!==d){a[d]=a[c];delete a[c]}})}var i=g("dom"),b=g("./base"),c=g("./timer/easing"),l=g("./timer/manager"),f=g("./timer/fx"),o=g("./timer/short-hand");g("./timer/color");g("./timer/transform");var m=i._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;
j.extend(h,b,{prepareFx:function(){var b=this.node,g=this._propsData;j.each(g,function(a){a.duration=a.duration*1E3;a.delay=a.delay*1E3;if(typeof a.easing==="string")a.easing=c.toFn(a.easing)});j.each(o,function(a,c){var d,e=g[c],f;if(e){f=e.value;d={};j.each(a,function(a){d[a]=i.css(b,a)});i.css(b,c,f);j.each(d,function(a,c){c in g||(g[c]=j.merge(e,{value:i.css(b,c)}));i.css(b,c,a)});delete g[c]}});var e,d,h,l,m,p,r,u=0,q;j.isPlainObject(b)&&(u=1);for(e in g){d=g[e];h=d.value;p={isCustomFx:u,prop:e,
anim:this,fxType:d.fxType,type:d.type,propData:d};r=f.getFx(p);l=h;m=r.cur();h=h+"";q="";if(h=h.match(a)){l=parseFloat(h[2]);if((q=h[3])&&q!=="px"&&m){var s=0,t=l;do{++t;i.css(b,e,t+q);s=r.cur()}while(s===0);m=t/s*m;i.css(b,e,m+q)}h[1]&&(l=(h[1]==="-="?-1:1)*l+m)}p.from=m;p.to=l;p.unit=q;r.load(p);d.fx=r}},frame:function(){var a,b=1,c,d=this._propsData;for(a in d){c=d[a];c=c.fx;c.frame();if(this.isRejected()||this.isResolved())return;b=b&c.pos===1}d=j.now();a=this.config.duration*1E3;d=Math.max(0,
this.startTime+a-d);this.defer.notify([this,1-(d/a||0),d]);b&&this.stop(b)},doStop:function(a){var b,c=this._propsData;l.stop(this);if(a)for(b in c){a=c[b];(a=a.fx)&&a.frame(1)}},doStart:function(){l.start(this)}});h.Easing=c;h.Fx=f;return h});
